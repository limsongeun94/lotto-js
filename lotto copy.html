<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로또당첨되세요~</title>
    <style>
        * {
            margin : 0;
            padding : 0;
        }

        .num_container {
            margin: 0 auto;
            box-sizing: border-box;
            width: 443px;
            padding-bottom: 12px;
        }

        .flex {
            display: flex;
            flex-wrap: wrap;
            padding : 12px;
            padding-left : 0;
        }

        .flex > div {
            margin-left: 12px;
        }

        .extract {
            width: 180px;
            height: 50px;
            font-size: 24px;
            cursor: pointer;
        }

        .extract:first-child {
            margin-right: 25px;
        }

        .number_box {
            margin: 0 auto;
            margin-bottom: 30px;
            width: 560px;
            box-sizing: border-box;
            border-collapse: collapse;
            border : 1px solid black;
        }

        .number_box th {            
            padding: 8px;
            line-height: 2em;
        }

        .number_box td {            
            padding: 8px;
            border-top : 1px solid black;
            font-size: 1.5em;
            line-height: 2em;
        }
    </style>
</head>
<body>
    <h1 style="margin : 30px; text-align: center;">로또 번호 추출기</h1>
    <fieldset class="num_container">
        <legend style="margin-left: 12px;">포함할 번호</legend>
        <form>
            <div  id = "include_number" class = "flex"></div>
            <div style="text-align: center;">
                <button type="reset">초기화</button>
            </div>
        </form>
    </fieldset>
    <fieldset class="num_container">
        <legend style="margin-left: 12px;">제외할 번호</legend>
        <form>
            <div id = "except_number" class = "flex"></div>
            <div style="text-align: center;" >
                <button type="reset">초기화</button>
            </div>
        </form>
    </fieldset>
    <div style="margin : 30px; text-align: center;">
        <button class="extract" onclick="oneLottoArray()">한 줄 추출</button>
        <button class="extract" onclick="fiveLottoArray()">다섯 줄 추출</button>
    </div>
    <table class="number_box">
        <thead>
            <tr><th>한 줄 번호 추출!</th></tr>
        </thead>
        <tbody>
            <tr><td id="one" style="text-align: center;"></td></tr>
        </tbody>
    </table>
    <table class="number_box">
        <thead>
            <tr><th>다섯 줄 번호 추출!</th></tr>
        </thead>
        <tbody>
            <tr><td id="five"  style="text-align: center;"></td></tr>
        </tbody>
    </table>
</body>
<script>
    function createNum(el, perfix) {
        for(i = 1; i <= 45; i++){
            let item = document.createElement("div")
            let label = document.createElement("label")
            let input = document.createElement("input")
        
            label.setAttribute("for", perfix + i)
            label.innerText = i < 10 ? "0" + i : i
            input.setAttribute("type", "checkbox")
            input.setAttribute("value", i)
            input.id = perfix + i
            input.name = input.id.substr(0,3) === "ex_" ? "except" : "include"
    
            item.appendChild(label)
            item.appendChild(input)
            el.appendChild(item)
        }
    }

    let include = document.getElementById("include_number")
    let except = document.getElementById("except_number")
    
    createNum(include, "in_")
    createNum(except, "ex_")


    let exName = document.getElementsByName("except")
    let inName = document.getElementsByName("include")


    // 만약 exName.value == inName.value 라면 방금 누른 input의 속성을 setAttribute로 ("onclick", "return false;")로 바꿔줄 것.

    // 이 함수는 내가 원하는 값을 계산해서 다른 곳에서 쓰기 위해서 값을 반환해주어야 해
    // return은 값을 반환해주는 명령어.

    // 이러고 뻗는거야? 응
    // 어떤 알고리즘을 썼는지는 잘 모르겠는데
    // 포함할 숫자는 어렵지않아.

    // 포함할 숫자니까. 그냥 처음부터 포함시킨다음에 남은 숫자들만 랜덤으로 뽑아.
    // 포함할 숫자는 어디서 처리해?
    function createLottoArr() { 
        let lottoarray = new Array();

        let notInclude = Array.from(exName).filter(el => el.checked).map(el => parseInt(el.value) )
        let isInclude = Array.from(inName).filter(el => el.checked).map(el => parseInt(el.value) )
        
        lottoarray = lottoarray.concat(isInclude)

        let selectNum = isInclude.length
        let rest = 6 - selectNum
        for (i=0; i<rest; i++) {
            let randomNum = Math.floor(Math.random()*45)+1;
                                                              
            let condition1 = lottoarray.indexOf(randomNum) === -1
            let condition2 =  notInclude.indexOf(randomNum) === -1

            if(
                // 여태껏 뽑은 번호 중 randomNum이 없는가
                condition1
                &&
                // 사용자가 제외한 번호 중 randomNum이 없는가
                condition2
                // &&
                // condition3
            ) {
                lottoarray.push(randomNum);
                // 일단 푸시 메서드는 체이닝이 안돼... 푸시.푸시.푸시... 이렇게는 못써 ㅋㅋ
            } else {
                i--;
            }
        }
        // 리턴한값을
        // 정렬만 좀 내가 해줄게
        // 정렬은 꼭 해야 하는 거야?
        // 꼭 그렇진 않은데 보통 정렬되서 나오잖아. 로또번호. 보통 정렬 안 돼서 나오던데? ..? 그런가??
        // 일단 나머지 직접해봐 ㅋㅋ 엥.......아라써...........
        return lottoarray.sort();
    }
    
    function oneLottoArray() {
        // 그래야 이렇게 다른 함수에서 값을 반환받아서 쓸 수 있어.
        // 받아서
        const result = createLottoArr()
        // 적용
        document.getElementById("one").innerText = result
    }

    function fiveLottoArray() {
        let result = []
        for (a=0; a<5; a++) {
            // 반복문 내에서 받아서 배열에 넣고
            result.push(createLottoArr())
        }
        // 적용
        document.getElementById("five").innerHTML = result.join("<br />")
    }



    // function oneLottoArray() {
    //     let lottoarray = new Array();
    //     for (i=0; i<6; i++) {
    //             let randomNum = Math.floor(Math.random()*45)+1;
    //             if(lottoarray.indexOf(randomNum) === -1) {
    //                 lottoarray.push(randomNum);
    //             } else {
    //                 i--;
    //             }
    //         }
    //     document.getElementById("one").innerText = lottoarray
    // }

    // function fiveLottoArray() {
    //     // document.getElementById("one").innerHTML 가 포문 안에 있으면 계속 새로운 값으로 갱신됨.
    //     //  그러니 for문 밖에 result라는 변수를 하나 선언해사
    //     let result = []
    //     for (a=0; a<5; a++) {
    //         let lottoarray = new Array();
    //         for (i=0; i<6; i++) {
    //             let randomNum = Math.floor(Math.random()*45)+1;
    //             if(lottoarray.indexOf(randomNum) === -1) {
    //                 lottoarray.push(randomNum);
    //             } else {
    //                 i--;
    //             }
    //         }
    //         // for문 안에 result 배열에 lottoarray 배열을 푸쉬해분 다음에
    //         result.push(lottoarray)
    //     }
    //     // 포문 바깥에서 딱 한번만 HTML에 삽입해주면 됨.
    //     document.getElementById("five").innerHTML = result.join("<br />")
    // }

</script>
</html>